# QDarts v5 Configuration for Quantum Device Simulation with Barrier Support
# Simplified configuration with essential barrier functionality

device:
  # Device topology
  topology:
    num_dots: 3
    num_gates: 6
    sensor_dots: [2]

  # Target state configuration
  target_state: [1, 1, 5]

simulator:
  capacitance:
    # Dot-to-dot capacitance matrix (N_dots x N_dots)
    C_DD:
      - [1.0, 0.2, 0.08]
      - [0.2, 1.0, 0.08]
      - [0.08, 0.08, 1.0]
    
    # Dot-to-gate capacitance matrix (N_dots x N_gates) - ALL gates including barriers
    # Format: [dot_0_to_gates], [dot_1_to_gates], [dot_2_to_gates]
    C_DG:
      - [0.75, 0.1, 0, 0, 0, 0.02]  # Dot 0 to gates 0,1,2,3,4,5
      - [0.1, 0.75, 0, 0, 0, 0.02]  # Dot 1 to gates 0,1,2,3,4,5  
      - [0,      0, 0, 0, 0,  1.0]        # Dot 2 (sensor) to gates 0,1,2,3,4,5
    
    # Minimum voltage bounds for each gate
    bounds_limits: -2.0
    
    # Deviation from constant interaction model
    ks: 4

  tunneling:
    # Base tunnel couplings matrix (N_dots x N_dots)
    # This will be dynamically modified by barrier voltages
    tunnel_couplings:
      - [0    , 30e-4, 0]  # Dot 0 couplings
      - [30e-4, 0    , 0]  # Dot 1 couplings
      - [0    , 0    , 0]  # Dot 2 (sensor) couplings
    
    temperature: 1  # K
    energy_range_factor: 5.0

  # Barrier control configuration
  barrier:
    # Barrier to tunnel coupling mappings
    # Each barrier controls specific tunnel couplings with proper alpha parameters
    barrier_mappings:
      # Barrier 2: controls coupling between reservoir and dot 0
      barrier_2:
        coupling_type: "reservoir_to_dot"
        target_dot: 0
        base_coupling: 30e-6
        alpha: 2.0  # Stronger voltage dependence for reservoir coupling
        voltage_offset: 0.0
        
      # Barrier 3: controls coupling between dots 0 and 1
      barrier_3:
        coupling_type: "dot_to_dot"
        target_dots: [0, 1]
        base_coupling: 30e-6
        alpha: 1.5  # Moderate voltage dependence for dot-dot coupling
        voltage_offset: 0.0
        
      # Barrier 4: controls coupling between dot 1 and reservoir
      barrier_4:
        coupling_type: "dot_to_reservoir"
        target_dot: 1
        base_coupling: 30e-6
        alpha: 2.0  # Same as barrier_2 (both reservoir couplings)
        voltage_offset: 0.0
    
    # Default barrier voltages
    default_barrier_voltages:
      barrier_2: 0.0
      barrier_3: 0.0
      barrier_4: 0.0

  sensor:
    sensor_dot_indices: [2]
    sensor_gate_indices: [5]
    sensor_detunings: [5]  # meV
    noise_amplitude:
      fast_noise: 1e-4
      slow_noise: 1e-5
    peak_width_multiplier: 200

# Measurement configuration
measurement:
  # Voltage sweep configuration
  voltage_range:
    min: [-0.2, -0.2]
    max: [0.2, 0.2]
  
  # Resolution for 2D scans
  resolution: 250
  
  # Gate configuration matrix for 2D sweeps
  sweep_matrix:
    - [1, 0]  # Gate 0 on x-axis
    - [0, 1]  # Gate 1 on y-axis
    - [0, 0]  # Other gates fixed
    - [0, 0]
    - [0, 0]
    - [0, 0]

# Output configuration
output:
  # Plotting configuration
  plots:
    save_format: "png"
    dpi: 300
    bbox_inches: "tight"
  
  # File naming
  filenames:
    csd_plot: "qdarts_v5_csd_plot.png"
    sensor_plot: "qdarts_v5_sensor_plot.png"
    noised_plot: "qdarts_v5_noised_plot.png"

# Logging configuration
logging:
  print_logs: true
  timing: true
  debug: false 